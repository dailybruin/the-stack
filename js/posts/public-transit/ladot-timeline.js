const ladotData = [
  {
    hovertemplate: 'Line 431<br>%{x}<br>Number of riders: %{y}<extra></extra>',
    legendgroup: 'line 431',
    line: { color: 'rgb(102, 197, 204)', dash: 'solid', shape: 'spline' },
    marker: { symbol: 'circle' },
    mode: 'lines',
    name: 'line 431',
    orientation: 'v',
    showlegend: true,
    type: 'scatter',
    x: [
      'Jan. 19',
      'Feb. 19',
      'Mar. 19',
      'Apr. 19',
      'May 19',
      'Jun. 19',
      'Jul. 19',
      'Aug. 19',
      'Sep. 19',
      'Oct. 19',
      'Nov. 19',
      'Dec. 19',
      'Jan. 20',
      'Feb. 20',
      'Mar. 20',
      'Apr. 20',
      'May 20',
      'Jun. 20',
      'Jul. 20',
      'Aug. 20',
      'Sep. 20',
      'Oct. 20',
      'Nov. 20',
      'Dec. 20',
      'Jan. 21',
      'Feb. 21',
      'Mar. 21',
      'Apr. 21',
      'May 21',
      'Jun. 21',
      'Jul. 21',
      'Aug. 21',
      'Sep. 21',
      'Oct. 21',
    ],
    xaxis: 'x',
    y: [
      3688.0,
      3235.0,
      3544.0,
      3030.0,
      2956.0,
      3005.0,
      4017.0,
      4282.0,
      4455.0,
      3909.0,
      3056.0,
      4153.0,
      2651.0,
      1772.0,
      775.0,
      68.0,
      59.0,
      112.0,
      127.0,
      108.0,
      130.0,
      211.0,
      164.0,
      62.0,
      96.0,
      167.0,
      216.0,
      167.0,
      150.0,
      595.0,
      343.0,
      365.0,
      517.0,
      513.0,
    ],
    yaxis: 'y',
  },
  {
    hovertemplate: 'Line 534<br>%{x}<br>Number of riders: %{y}<extra></extra>',
    legendgroup: 'line 534',
    line: { color: 'rgb(246, 207, 113)', dash: 'solid', shape: 'spline' },
    marker: { symbol: 'circle' },
    mode: 'lines',
    name: 'line 534',
    orientation: 'v',
    showlegend: true,
    type: 'scatter',
    x: [
      'Jan. 19',
      'Feb. 19',
      'Mar. 19',
      'Apr. 19',
      'May 19',
      'Jun. 19',
      'Jul. 19',
      'Aug. 19',
      'Sep. 19',
      'Oct. 19',
      'Nov. 19',
      'Dec. 19',
      'Jan. 20',
      'Feb. 20',
      'Mar. 20',
      'Apr. 20',
      'May 20',
      'Jun. 20',
      'Jul. 20',
      'Aug. 20',
      'Sep. 20',
      'Oct. 20',
      'Nov. 20',
      'Dec. 20',
      'Jan. 21',
      'Feb. 21',
      'Mar. 21',
      'Apr. 21',
      'May 21',
      'Jun. 21',
      'Jul. 21',
      'Aug. 21',
      'Sep. 21',
      'Oct. 21',
    ],
    xaxis: 'x',
    y: [
      2666.0,
      2427.0,
      2491.0,
      2559.0,
      2515.0,
      2506.0,
      2577.0,
      2393.0,
      2269.0,
      2468.0,
      2419.0,
      2083.0,
      2227.0,
      1705.0,
      1029.0,
      71.0,
      69.0,
      151.0,
      176.0,
      197.0,
      225.0,
      196.0,
      163.0,
      199.0,
      249.0,
      196.0,
      246.0,
      268.0,
      304.0,
      395.0,
      504.0,
      810.0,
      983.0,
      992.0,
    ],
    yaxis: 'y',
  },
  {
    hovertemplate: 'Line 573<br>%{x}<br>Number of riders: %{y}<extra></extra>',
    legendgroup: 'line 573',
    line: { color: 'rgb(248, 156, 116)', dash: 'solid', shape: 'spline' },
    marker: { symbol: 'circle' },
    mode: 'lines',
    name: 'line 573',
    orientation: 'v',
    showlegend: true,
    type: 'scatter',
    x: [
      'Jan. 19',
      'Feb. 19',
      'Mar. 19',
      'Apr. 19',
      'May 19',
      'Jun. 19',
      'Jul. 19',
      'Aug. 19',
      'Sep. 19',
      'Oct. 19',
      'Nov. 19',
      'Dec. 19',
      'Jan. 20',
      'Feb. 20',
      'Mar. 20',
      'Apr. 20',
      'May 20',
      'Jun. 20',
      'Jul. 20',
      'Aug. 20',
      'Sep. 20',
      'Oct. 20',
      'Nov. 20',
      'Dec. 20',
      'Jan. 21',
      'Feb. 21',
      'Mar. 21',
      'Apr. 21',
      'May 21',
      'Jun. 21',
      'Jul. 21',
      'Aug. 21',
      'Sep. 21',
      'Oct. 21',
    ],
    xaxis: 'x',
    y: [
      16671.0,
      16525.0,
      17893.0,
      18752.0,
      19923.0,
      16984.0,
      17959.0,
      18062.0,
      16378.0,
      18725.0,
      15860.0,
      12768.0,
      15660.0,
      13274.0,
      7428.0,
      1076.0,
      1324.0,
      2096.0,
      2529.0,
      2561.0,
      2849.0,
      3012.0,
      2807.0,
      2196.0,
      2188.0,
      2488.0,
      3219.0,
      3334.0,
      3298.0,
      4032.0,
      3955.0,
      4961.0,
      5821.0,
      5873.0,
    ],
    yaxis: 'y',
  },
];

const ladotLayout = {
  height: 480,
  legend: {
    x: -0.1,
    y: 1.2,
    orientation: 'h',
    tracegroupgap: 0,
  },
  margin: {
    r: 15,
    t: 130,
  },
  annotations: [
    {
      showarrow: false,
      text: 'CA stay-at-home<br>order issued',
      x: 14,
      xanchor: 'left',
      xref: 'x',
      y: 1,
      yanchor: 'top',
      yref: 'y domain',
    },
  ],
  shapes: [
    {
      line: { dash: 'dot' },
      type: 'line',
      x0: 14,
      x1: 14,
      xref: 'x',
      y0: 0,
      y1: 1,
      yref: 'y domain',
    },
  ],
  template: {
    data: {
      bar: [
        {
          error_x: {
            color: '#2a3f5f',
          },
          error_y: { color: '#2a3f5f' },
          marker: {
            line: {
              color: '#E5ECF6',
              width: 0.5,
            },
            pattern: { fillmode: 'overlay', size: 10, solidity: 0.2 },
          },
          type: 'bar',
        },
      ],
      barpolar: [
        {
          marker: {
            line: { color: '#E5ECF6', width: 0.5 },
            pattern: { fillmode: 'overlay', size: 10, solidity: 0.2 },
          },
          type: 'barpolar',
        },
      ],
      carpet: [
        {
          aaxis: {
            endlinecolor: '#2a3f5f',
            gridcolor: 'white',
            linecolor: 'white',
            minorgridcolor: 'white',
            startlinecolor: '#2a3f5f',
          },
          baxis: {
            endlinecolor: '#2a3f5f',
            gridcolor: 'white',
            linecolor: 'white',
            minorgridcolor: 'white',
            startlinecolor: '#2a3f5f',
          },
          type: 'carpet',
        },
      ],
      choropleth: [
        { colorbar: { outlinewidth: 0, ticks: '' }, type: 'choropleth' },
      ],
      contour: [
        {
          colorbar: { outlinewidth: 0, ticks: '' },
          colorscale: [
            [0.0, '#0d0887'],
            [0.1111111111111111, '#46039f'],
            [0.2222222222222222, '#7201a8'],
            [0.3333333333333333, '#9c179e'],
            [0.4444444444444444, '#bd3786'],
            [0.5555555555555556, '#d8576b'],
            [0.6666666666666666, '#ed7953'],
            [0.7777777777777778, '#fb9f3a'],
            [0.8888888888888888, '#fdca26'],
            [1.0, '#f0f921'],
          ],
          type: 'contour',
        },
      ],
      contourcarpet: [
        { colorbar: { outlinewidth: 0, ticks: '' }, type: 'contourcarpet' },
      ],
      heatmap: [
        {
          colorbar: { outlinewidth: 0, ticks: '' },
          colorscale: [
            [0.0, '#0d0887'],
            [0.1111111111111111, '#46039f'],
            [0.2222222222222222, '#7201a8'],
            [0.3333333333333333, '#9c179e'],
            [0.4444444444444444, '#bd3786'],
            [0.5555555555555556, '#d8576b'],
            [0.6666666666666666, '#ed7953'],
            [0.7777777777777778, '#fb9f3a'],
            [0.8888888888888888, '#fdca26'],
            [1.0, '#f0f921'],
          ],
          type: 'heatmap',
        },
      ],
      heatmapgl: [
        {
          colorbar: { outlinewidth: 0, ticks: '' },
          colorscale: [
            [0.0, '#0d0887'],
            [0.1111111111111111, '#46039f'],
            [0.2222222222222222, '#7201a8'],
            [0.3333333333333333, '#9c179e'],
            [0.4444444444444444, '#bd3786'],
            [0.5555555555555556, '#d8576b'],
            [0.6666666666666666, '#ed7953'],
            [0.7777777777777778, '#fb9f3a'],
            [0.8888888888888888, '#fdca26'],
            [1.0, '#f0f921'],
          ],
          type: 'heatmapgl',
        },
      ],
      histogram: [
        {
          marker: { pattern: { fillmode: 'overlay', size: 10, solidity: 0.2 } },
          type: 'histogram',
        },
      ],
      histogram2d: [
        {
          colorbar: { outlinewidth: 0, ticks: '' },
          colorscale: [
            [0.0, '#0d0887'],
            [0.1111111111111111, '#46039f'],
            [0.2222222222222222, '#7201a8'],
            [0.3333333333333333, '#9c179e'],
            [0.4444444444444444, '#bd3786'],
            [0.5555555555555556, '#d8576b'],
            [0.6666666666666666, '#ed7953'],
            [0.7777777777777778, '#fb9f3a'],
            [0.8888888888888888, '#fdca26'],
            [1.0, '#f0f921'],
          ],
          type: 'histogram2d',
        },
      ],
      histogram2dcontour: [
        {
          colorbar: { outlinewidth: 0, ticks: '' },
          colorscale: [
            [0.0, '#0d0887'],
            [0.1111111111111111, '#46039f'],
            [0.2222222222222222, '#7201a8'],
            [0.3333333333333333, '#9c179e'],
            [0.4444444444444444, '#bd3786'],
            [0.5555555555555556, '#d8576b'],
            [0.6666666666666666, '#ed7953'],
            [0.7777777777777778, '#fb9f3a'],
            [0.8888888888888888, '#fdca26'],
            [1.0, '#f0f921'],
          ],
          type: 'histogram2dcontour',
        },
      ],
      mesh3d: [{ colorbar: { outlinewidth: 0, ticks: '' }, type: 'mesh3d' }],
      parcoords: [
        {
          line: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'parcoords',
        },
      ],
      pie: [{ automargin: true, type: 'pie' }],
      scatter: [
        {
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scatter',
        },
      ],
      scatter3d: [
        {
          line: { colorbar: { outlinewidth: 0, ticks: '' } },
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scatter3d',
        },
      ],
      scattercarpet: [
        {
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scattercarpet',
        },
      ],
      scattergeo: [
        {
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scattergeo',
        },
      ],
      scattergl: [
        {
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scattergl',
        },
      ],
      scattermapbox: [
        {
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scattermapbox',
        },
      ],
      scatterpolar: [
        {
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scatterpolar',
        },
      ],
      scatterpolargl: [
        {
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scatterpolargl',
        },
      ],
      scatterternary: [
        {
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scatterternary',
        },
      ],
      surface: [
        {
          colorbar: { outlinewidth: 0, ticks: '' },
          colorscale: [
            [0.0, '#0d0887'],
            [0.1111111111111111, '#46039f'],
            [0.2222222222222222, '#7201a8'],
            [0.3333333333333333, '#9c179e'],
            [0.4444444444444444, '#bd3786'],
            [0.5555555555555556, '#d8576b'],
            [0.6666666666666666, '#ed7953'],
            [0.7777777777777778, '#fb9f3a'],
            [0.8888888888888888, '#fdca26'],
            [1.0, '#f0f921'],
          ],
          type: 'surface',
        },
      ],
      table: [
        {
          cells: { fill: { color: '#EBF0F8' }, line: { color: 'white' } },
          header: { fill: { color: '#C8D4E3' }, line: { color: 'white' } },
          type: 'table',
        },
      ],
    },
    layout: {
      annotationdefaults: {
        arrowcolor: '#2a3f5f',
        arrowhead: 0,
        arrowwidth: 1,
      },
      autotypenumbers: 'strict',
      coloraxis: { colorbar: { outlinewidth: 0, ticks: '' } },
      colorscale: {
        diverging: [
          [0, '#8e0152'],
          [0.1, '#c51b7d'],
          [0.2, '#de77ae'],
          [0.3, '#f1b6da'],
          [0.4, '#fde0ef'],
          [0.5, '#f7f7f7'],
          [0.6, '#e6f5d0'],
          [0.7, '#b8e186'],
          [0.8, '#7fbc41'],
          [0.9, '#4d9221'],
          [1, '#276419'],
        ],
        sequential: [
          [0.0, '#0d0887'],
          [0.1111111111111111, '#46039f'],
          [0.2222222222222222, '#7201a8'],
          [0.3333333333333333, '#9c179e'],
          [0.4444444444444444, '#bd3786'],
          [0.5555555555555556, '#d8576b'],
          [0.6666666666666666, '#ed7953'],
          [0.7777777777777778, '#fb9f3a'],
          [0.8888888888888888, '#fdca26'],
          [1.0, '#f0f921'],
        ],
        sequentialminus: [
          [0.0, '#0d0887'],
          [0.1111111111111111, '#46039f'],
          [0.2222222222222222, '#7201a8'],
          [0.3333333333333333, '#9c179e'],
          [0.4444444444444444, '#bd3786'],
          [0.5555555555555556, '#d8576b'],
          [0.6666666666666666, '#ed7953'],
          [0.7777777777777778, '#fb9f3a'],
          [0.8888888888888888, '#fdca26'],
          [1.0, '#f0f921'],
        ],
      },
      colorway: [
        '#636efa',
        '#EF553B',
        '#00cc96',
        '#ab63fa',
        '#FFA15A',
        '#19d3f3',
        '#FF6692',
        '#B6E880',
        '#FF97FF',
        '#FECB52',
      ],
      font: { color: '#2a3f5f' },
      geo: {
        bgcolor: 'white',
        lakecolor: 'white',
        landcolor: '#E5ECF6',
        showlakes: true,
        showland: true,
        subunitcolor: 'white',
      },
      hoverlabel: { align: 'left' },
      hovermode: 'closest',
      mapbox: { style: 'light' },
      paper_bgcolor: 'white',
      plot_bgcolor: '#E5ECF6',
      polar: {
        angularaxis: { gridcolor: 'white', linecolor: 'white', ticks: '' },
        bgcolor: '#E5ECF6',
        radialaxis: { gridcolor: 'white', linecolor: 'white', ticks: '' },
      },
      scene: {
        xaxis: {
          backgroundcolor: '#E5ECF6',
          gridcolor: 'white',
          gridwidth: 2,
          linecolor: 'white',
          showbackground: true,
          ticks: '',
          zerolinecolor: 'white',
        },
        yaxis: {
          backgroundcolor: '#E5ECF6',
          gridcolor: 'white',
          gridwidth: 2,
          linecolor: 'white',
          showbackground: true,
          ticks: '',
          zerolinecolor: 'white',
        },
        zaxis: {
          backgroundcolor: '#E5ECF6',
          gridcolor: 'white',
          gridwidth: 2,
          linecolor: 'white',
          showbackground: true,
          ticks: '',
          zerolinecolor: 'white',
        },
      },
      shapedefaults: { line: { color: '#2a3f5f' } },
      ternary: {
        aaxis: { gridcolor: 'white', linecolor: 'white', ticks: '' },
        baxis: { gridcolor: 'white', linecolor: 'white', ticks: '' },
        bgcolor: '#E5ECF6',
        caxis: { gridcolor: 'white', linecolor: 'white', ticks: '' },
      },
      title: { x: 0.05 },
      xaxis: {
        automargin: true,
        gridcolor: 'white',
        linecolor: 'white',
        ticks: '',
        title: { standoff: 15 },
        zerolinecolor: 'white',
        zerolinewidth: 2,
      },
      yaxis: {
        automargin: true,
        gridcolor: 'white',
        linecolor: 'white',
        ticks: '',
        title: { standoff: 15 },
        zerolinecolor: 'white',
        zerolinewidth: 2,
      },
    },
  },
  title: {
    text: '<b>LADOT monthly<br>ridership</b>',
    font: {
      size: 20,
    },
    xref: 'container',
    x: 0.5,
    y: 0.9,
    yanchor: 'top',
    yref: 'container',
  },
  xaxis: {
    anchor: 'y',
    domain: [0.0, 1.0],
    tickangle: -60,
    title: { text: 'Month' },
    fixedrange: true,
  },
  yaxis: {
    anchor: 'x',
    domain: [0.0, 1.0],
    fixedrange: true,
    nticks: 20,
    tickformat: ',',
    title: {
      text: 'Number of riders',
    },
  },
};

if (!isMobile) {
  ladotLayout.title.text = '<b>LADOT monthly ridership</b>';
  ladotLayout.height = 450;
  ladotLayout.legend.x = 0;
  ladotLayout.margin.t = 100;
  ladotLayout.title.xref = 'paper';
  ladotLayout.annotations = [
    {
      showarrow: false,
      text: 'First COVID-19 case in LA',
      x: 12,
      xanchor: 'right',
      xref: 'x',
      y: 1,
      yanchor: 'top',
      yref: 'y domain',
    },
    {
      showarrow: false,
      text: 'CA stay-at-home order issued',
      x: 14,
      xanchor: 'left',
      xref: 'x',
      y: 1,
      yanchor: 'top',
      yref: 'y domain',
    },
  ];
  ladotLayout.shapes = [
    {
      line: { dash: 'dot' },
      type: 'line',
      x0: 12,
      x1: 12,
      xref: 'x',
      y0: 0,
      y1: 1,
      yref: 'y domain',
    },
    {
      line: { dash: 'dot' },
      type: 'line',
      x0: 14,
      x1: 14,
      xref: 'x',
      y0: 0,
      y1: 1,
      yref: 'y domain',
    },
  ];
  ladotLayout.legend = {
    tracegroupgap: 0,
  };
}

Plotly.newPlot('ladot-timeline', ladotData, ladotLayout, options);
