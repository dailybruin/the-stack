const bbbData = [
  {
    hovertemplate: 'Line 1<br>%{x}<br>Number of riders: %{y}<extra></extra>',
    legendgroup: 'line 1',
    line: { color: 'rgb(102, 197, 204)', dash: 'solid', shape: 'spline' },
    marker: {
      symbol: 'circle',
      line: {
        color: '#222222',
        width: 0.5,
      },
    },
    mode: 'markers+lines',
    name: 'line 1',
    orientation: 'v',
    showlegend: true,
    type: 'scatter',
    x: [
      'Jan. 19',
      'Feb. 19',
      'Mar. 19',
      'Apr. 19',
      'May 19',
      'Jun. 19',
      'Jul. 19',
      'Aug. 19',
      'Sep. 19',
      'Oct. 19',
      'Nov. 19',
      'Dec. 19',
      'Jan. 20',
      'Feb. 20',
      'Mar. 20',
      'Apr. 20',
      'May 20',
      'Jun. 20',
      'Jul. 20',
      'Aug. 20',
      'Sep. 20',
      'Oct. 20',
      'Nov. 20',
      'Dec. 20',
      'Jan. 21',
      'Feb. 21',
      'Mar. 21',
      'Apr. 21',
      'May 21',
      'Jun. 21',
      'Jul. 21',
      'Aug. 21',
      'Sep. 21',
      'Oct. 21',
    ],
    xaxis: 'x',
    y: [
      null,
      null,
      162032.47999999998,
      null,
      null,
      155850.8,
      null,
      170529.38,
      null,
      null,
      null,
      null,
      null,
      89532.04,
      null,
      null,
      83058.04000000001,
      null,
      null,
      null,
      78334.3,
      null,
      null,
      null,
      null,
      null,
      null,
      80709.32,
      null,
      null,
      null,
      97520.48,
      null,
      null,
    ],
    yaxis: 'y',
  },
  {
    hovertemplate: 'Line 2<br>%{x}<br>Number of riders: %{y}<extra></extra>',
    legendgroup: 'line 2',
    line: { color: 'rgb(246, 207, 113)', dash: 'solid', shape: 'spline' },
    marker: { symbol: 'circle', line: { color: '#222222', width: 0.5 } },
    mode: 'markers+lines',
    name: 'line 2',
    orientation: 'v',
    showlegend: true,
    type: 'scatter',
    x: [
      'Jan. 19',
      'Feb. 19',
      'Mar. 19',
      'Apr. 19',
      'May 19',
      'Jun. 19',
      'Jul. 19',
      'Aug. 19',
      'Sep. 19',
      'Oct. 19',
      'Nov. 19',
      'Dec. 19',
      'Jan. 20',
      'Feb. 20',
      'Mar. 20',
      'Apr. 20',
      'May 20',
      'Jun. 20',
      'Jul. 20',
      'Aug. 20',
      'Sep. 20',
      'Oct. 20',
      'Nov. 20',
      'Dec. 20',
      'Jan. 21',
      'Feb. 21',
      'Mar. 21',
      'Apr. 21',
      'May 21',
      'Jun. 21',
      'Jul. 21',
      'Aug. 21',
      'Sep. 21',
      'Oct. 21',
    ],
    xaxis: 'x',
    y: [
      null,
      null,
      61232.36,
      null,
      null,
      59540.799999999996,
      null,
      68878.47,
      null,
      null,
      null,
      null,
      null,
      37628.45,
      null,
      null,
      21394.04,
      null,
      null,
      null,
      19845.0,
      null,
      null,
      null,
      null,
      null,
      null,
      22018.04,
      null,
      null,
      null,
      28294.590000000004,
      null,
      null,
    ],
    yaxis: 'y',
  },
  {
    hovertemplate: 'Line 3<br>%{x}<br>Number of riders: %{y}<extra></extra>',
    legendgroup: 'line 3',
    line: { color: 'rgb(248, 156, 116)', dash: 'solid', shape: 'spline' },
    marker: { symbol: 'circle', line: { color: '#222222', width: 0.5 } },
    mode: 'markers+lines',
    name: 'line 3',
    orientation: 'v',
    showlegend: true,
    type: 'scatter',
    x: [
      'Jan. 19',
      'Feb. 19',
      'Mar. 19',
      'Apr. 19',
      'May 19',
      'Jun. 19',
      'Jul. 19',
      'Aug. 19',
      'Sep. 19',
      'Oct. 19',
      'Nov. 19',
      'Dec. 19',
      'Jan. 20',
      'Feb. 20',
      'Mar. 20',
      'Apr. 20',
      'May 20',
      'Jun. 20',
      'Jul. 20',
      'Aug. 20',
      'Sep. 20',
      'Oct. 20',
      'Nov. 20',
      'Dec. 20',
      'Jan. 21',
      'Feb. 21',
      'Mar. 21',
      'Apr. 21',
      'May 21',
      'Jun. 21',
      'Jul. 21',
      'Aug. 21',
      'Sep. 21',
      'Oct. 21',
    ],
    xaxis: 'x',
    y: [
      null,
      null,
      125329.44,
      null,
      null,
      124929.79999999999,
      null,
      128088.05000000002,
      null,
      null,
      null,
      null,
      null,
      77153.62,
      null,
      null,
      88957.22,
      null,
      null,
      null,
      83162.76,
      null,
      null,
      null,
      null,
      null,
      null,
      87708.18,
      null,
      null,
      null,
      76146.71,
      null,
      null,
    ],
    yaxis: 'y',
  },
  {
    hovertemplate: 'Line 8<br>%{x}<br>Number of riders: %{y}<extra></extra>',
    legendgroup: 'line 8',
    line: { color: 'rgb(220, 176, 242)', dash: 'solid', shape: 'spline' },
    marker: { symbol: 'circle', line: { color: '#222222', width: 0.5 } },
    mode: 'markers+lines',
    name: 'line 8',
    orientation: 'v',
    showlegend: true,
    type: 'scatter',
    x: [
      'Jan. 19',
      'Feb. 19',
      'Mar. 19',
      'Apr. 19',
      'May 19',
      'Jun. 19',
      'Jul. 19',
      'Aug. 19',
      'Sep. 19',
      'Oct. 19',
      'Nov. 19',
      'Dec. 19',
      'Jan. 20',
      'Feb. 20',
      'Mar. 20',
      'Apr. 20',
      'May 20',
      'Jun. 20',
      'Jul. 20',
      'Aug. 20',
      'Sep. 20',
      'Oct. 20',
      'Nov. 20',
      'Dec. 20',
      'Jan. 21',
      'Feb. 21',
      'Mar. 21',
      'Apr. 21',
      'May 21',
      'Jun. 21',
      'Jul. 21',
      'Aug. 21',
      'Sep. 21',
      'Oct. 21',
    ],
    xaxis: 'x',
    y: [
      null,
      null,
      71810.3,
      null,
      null,
      63812.75,
      null,
      76999.87999999999,
      null,
      null,
      null,
      null,
      null,
      36197.439999999995,
      null,
      null,
      21302.99,
      null,
      null,
      null,
      19088.56,
      null,
      null,
      null,
      null,
      null,
      null,
      22156.8,
      null,
      null,
      null,
      30330.1,
      null,
      null,
    ],
    yaxis: 'y',
  },
  {
    hovertemplate: 'Line 12<br>%{x}<br>Number of riders: %{y}<extra></extra>',
    legendgroup: 'line 12',
    line: { color: 'rgb(139, 224, 164)', dash: 'solid', shape: 'spline' },
    marker: { symbol: 'circle', line: { color: '#222222', width: 0.5 } },
    mode: 'markers+lines',
    name: 'line 12',
    orientation: 'v',
    showlegend: true,
    type: 'scatter',
    x: [
      'Jan. 19',
      'Feb. 19',
      'Mar. 19',
      'Apr. 19',
      'May 19',
      'Jun. 19',
      'Jul. 19',
      'Aug. 19',
      'Sep. 19',
      'Oct. 19',
      'Nov. 19',
      'Dec. 19',
      'Jan. 20',
      'Feb. 20',
      'Mar. 20',
      'Apr. 20',
      'May 20',
      'Jun. 20',
      'Jul. 20',
      'Aug. 20',
      'Sep. 20',
      'Oct. 20',
      'Nov. 20',
      'Dec. 20',
      'Jan. 21',
      'Feb. 21',
      'Mar. 21',
      'Apr. 21',
      'May 21',
      'Jun. 21',
      'Jul. 21',
      'Aug. 21',
      'Sep. 21',
      'Oct. 21',
    ],
    xaxis: 'x',
    y: [
      null,
      null,
      91375.96,
      null,
      null,
      77617.84999999999,
      null,
      96524.95,
      null,
      null,
      null,
      null,
      null,
      51297.159999999996,
      null,
      null,
      17248.74,
      null,
      null,
      null,
      24710.539999999997,
      null,
      null,
      null,
      null,
      null,
      null,
      28278.42,
      null,
      null,
      null,
      45487.86,
      null,
      null,
    ],
    yaxis: 'y',
  },
];

const bbbLayout = {
  height: 480,
  legend: {
    x: -0.1,
    y: 1.2,
    orientation: 'h',
    tracegroupgap: 0,
  },
  margin: {
    r: 15,
    t: 130,
  },
  annotations: [
    {
      showarrow: false,
      text: 'CA stay-at-home<br>order issued',
      x: 14,
      xanchor: 'left',
      xref: 'x',
      y: 1,
      yanchor: 'top',
      yref: 'y domain',
    },
  ],
  shapes: [
    {
      line: { dash: 'dot' },
      type: 'line',
      x0: 14,
      x1: 14,
      xref: 'x',
      y0: 0,
      y1: 1,
      yref: 'y domain',
    },
  ],
  template: {
    data: {
      bar: [
        {
          error_x: {
            color: '#2a3f5f',
          },
          error_y: { color: '#2a3f5f' },
          marker: {
            line: {
              color: '#E5ECF6',
              width: 0.5,
            },
            pattern: { fillmode: 'overlay', size: 10, solidity: 0.2 },
          },
          type: 'bar',
        },
      ],
      barpolar: [
        {
          marker: {
            line: { color: '#E5ECF6', width: 0.5 },
            pattern: { fillmode: 'overlay', size: 10, solidity: 0.2 },
          },
          type: 'barpolar',
        },
      ],
      carpet: [
        {
          aaxis: {
            endlinecolor: '#2a3f5f',
            gridcolor: 'white',
            linecolor: 'white',
            minorgridcolor: 'white',
            startlinecolor: '#2a3f5f',
          },
          baxis: {
            endlinecolor: '#2a3f5f',
            gridcolor: 'white',
            linecolor: 'white',
            minorgridcolor: 'white',
            startlinecolor: '#2a3f5f',
          },
          type: 'carpet',
        },
      ],
      choropleth: [
        { colorbar: { outlinewidth: 0, ticks: '' }, type: 'choropleth' },
      ],
      contour: [
        {
          colorbar: { outlinewidth: 0, ticks: '' },
          colorscale: [
            [0.0, '#0d0887'],
            [0.1111111111111111, '#46039f'],
            [0.2222222222222222, '#7201a8'],
            [0.3333333333333333, '#9c179e'],
            [0.4444444444444444, '#bd3786'],
            [0.5555555555555556, '#d8576b'],
            [0.6666666666666666, '#ed7953'],
            [0.7777777777777778, '#fb9f3a'],
            [0.8888888888888888, '#fdca26'],
            [1.0, '#f0f921'],
          ],
          type: 'contour',
        },
      ],
      contourcarpet: [
        { colorbar: { outlinewidth: 0, ticks: '' }, type: 'contourcarpet' },
      ],
      heatmap: [
        {
          colorbar: { outlinewidth: 0, ticks: '' },
          colorscale: [
            [0.0, '#0d0887'],
            [0.1111111111111111, '#46039f'],
            [0.2222222222222222, '#7201a8'],
            [0.3333333333333333, '#9c179e'],
            [0.4444444444444444, '#bd3786'],
            [0.5555555555555556, '#d8576b'],
            [0.6666666666666666, '#ed7953'],
            [0.7777777777777778, '#fb9f3a'],
            [0.8888888888888888, '#fdca26'],
            [1.0, '#f0f921'],
          ],
          type: 'heatmap',
        },
      ],
      heatmapgl: [
        {
          colorbar: { outlinewidth: 0, ticks: '' },
          colorscale: [
            [0.0, '#0d0887'],
            [0.1111111111111111, '#46039f'],
            [0.2222222222222222, '#7201a8'],
            [0.3333333333333333, '#9c179e'],
            [0.4444444444444444, '#bd3786'],
            [0.5555555555555556, '#d8576b'],
            [0.6666666666666666, '#ed7953'],
            [0.7777777777777778, '#fb9f3a'],
            [0.8888888888888888, '#fdca26'],
            [1.0, '#f0f921'],
          ],
          type: 'heatmapgl',
        },
      ],
      histogram: [
        {
          marker: { pattern: { fillmode: 'overlay', size: 10, solidity: 0.2 } },
          type: 'histogram',
        },
      ],
      histogram2d: [
        {
          colorbar: { outlinewidth: 0, ticks: '' },
          colorscale: [
            [0.0, '#0d0887'],
            [0.1111111111111111, '#46039f'],
            [0.2222222222222222, '#7201a8'],
            [0.3333333333333333, '#9c179e'],
            [0.4444444444444444, '#bd3786'],
            [0.5555555555555556, '#d8576b'],
            [0.6666666666666666, '#ed7953'],
            [0.7777777777777778, '#fb9f3a'],
            [0.8888888888888888, '#fdca26'],
            [1.0, '#f0f921'],
          ],
          type: 'histogram2d',
        },
      ],
      histogram2dcontour: [
        {
          colorbar: { outlinewidth: 0, ticks: '' },
          colorscale: [
            [0.0, '#0d0887'],
            [0.1111111111111111, '#46039f'],
            [0.2222222222222222, '#7201a8'],
            [0.3333333333333333, '#9c179e'],
            [0.4444444444444444, '#bd3786'],
            [0.5555555555555556, '#d8576b'],
            [0.6666666666666666, '#ed7953'],
            [0.7777777777777778, '#fb9f3a'],
            [0.8888888888888888, '#fdca26'],
            [1.0, '#f0f921'],
          ],
          type: 'histogram2dcontour',
        },
      ],
      mesh3d: [{ colorbar: { outlinewidth: 0, ticks: '' }, type: 'mesh3d' }],
      parcoords: [
        {
          line: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'parcoords',
        },
      ],
      pie: [{ automargin: true, type: 'pie' }],
      scatter: [
        {
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scatter',
        },
      ],
      scatter3d: [
        {
          line: { colorbar: { outlinewidth: 0, ticks: '' } },
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scatter3d',
        },
      ],
      scattercarpet: [
        {
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scattercarpet',
        },
      ],
      scattergeo: [
        {
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scattergeo',
        },
      ],
      scattergl: [
        {
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scattergl',
        },
      ],
      scattermapbox: [
        {
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scattermapbox',
        },
      ],
      scatterpolar: [
        {
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scatterpolar',
        },
      ],
      scatterpolargl: [
        {
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scatterpolargl',
        },
      ],
      scatterternary: [
        {
          marker: { colorbar: { outlinewidth: 0, ticks: '' } },
          type: 'scatterternary',
        },
      ],
      surface: [
        {
          colorbar: { outlinewidth: 0, ticks: '' },
          colorscale: [
            [0.0, '#0d0887'],
            [0.1111111111111111, '#46039f'],
            [0.2222222222222222, '#7201a8'],
            [0.3333333333333333, '#9c179e'],
            [0.4444444444444444, '#bd3786'],
            [0.5555555555555556, '#d8576b'],
            [0.6666666666666666, '#ed7953'],
            [0.7777777777777778, '#fb9f3a'],
            [0.8888888888888888, '#fdca26'],
            [1.0, '#f0f921'],
          ],
          type: 'surface',
        },
      ],
      table: [
        {
          cells: { fill: { color: '#EBF0F8' }, line: { color: 'white' } },
          header: { fill: { color: '#C8D4E3' }, line: { color: 'white' } },
          type: 'table',
        },
      ],
    },
    layout: {
      annotationdefaults: {
        arrowcolor: '#2a3f5f',
        arrowhead: 0,
        arrowwidth: 1,
      },
      autotypenumbers: 'strict',
      coloraxis: { colorbar: { outlinewidth: 0, ticks: '' } },
      colorscale: {
        diverging: [
          [0, '#8e0152'],
          [0.1, '#c51b7d'],
          [0.2, '#de77ae'],
          [0.3, '#f1b6da'],
          [0.4, '#fde0ef'],
          [0.5, '#f7f7f7'],
          [0.6, '#e6f5d0'],
          [0.7, '#b8e186'],
          [0.8, '#7fbc41'],
          [0.9, '#4d9221'],
          [1, '#276419'],
        ],
        sequential: [
          [0.0, '#0d0887'],
          [0.1111111111111111, '#46039f'],
          [0.2222222222222222, '#7201a8'],
          [0.3333333333333333, '#9c179e'],
          [0.4444444444444444, '#bd3786'],
          [0.5555555555555556, '#d8576b'],
          [0.6666666666666666, '#ed7953'],
          [0.7777777777777778, '#fb9f3a'],
          [0.8888888888888888, '#fdca26'],
          [1.0, '#f0f921'],
        ],
        sequentialminus: [
          [0.0, '#0d0887'],
          [0.1111111111111111, '#46039f'],
          [0.2222222222222222, '#7201a8'],
          [0.3333333333333333, '#9c179e'],
          [0.4444444444444444, '#bd3786'],
          [0.5555555555555556, '#d8576b'],
          [0.6666666666666666, '#ed7953'],
          [0.7777777777777778, '#fb9f3a'],
          [0.8888888888888888, '#fdca26'],
          [1.0, '#f0f921'],
        ],
      },
      colorway: [
        '#636efa',
        '#EF553B',
        '#00cc96',
        '#ab63fa',
        '#FFA15A',
        '#19d3f3',
        '#FF6692',
        '#B6E880',
        '#FF97FF',
        '#FECB52',
      ],
      font: { color: '#2a3f5f' },
      geo: {
        bgcolor: 'white',
        lakecolor: 'white',
        landcolor: '#E5ECF6',
        showlakes: true,
        showland: true,
        subunitcolor: 'white',
      },
      hoverlabel: { align: 'left' },
      hovermode: 'closest',
      mapbox: { style: 'light' },
      paper_bgcolor: 'white',
      plot_bgcolor: '#E5ECF6',
      polar: {
        angularaxis: { gridcolor: 'white', linecolor: 'white', ticks: '' },
        bgcolor: '#E5ECF6',
        radialaxis: { gridcolor: 'white', linecolor: 'white', ticks: '' },
      },
      scene: {
        xaxis: {
          backgroundcolor: '#E5ECF6',
          gridcolor: 'white',
          gridwidth: 2,
          linecolor: 'white',
          showbackground: true,
          ticks: '',
          zerolinecolor: 'white',
        },
        yaxis: {
          backgroundcolor: '#E5ECF6',
          gridcolor: 'white',
          gridwidth: 2,
          linecolor: 'white',
          showbackground: true,
          ticks: '',
          zerolinecolor: 'white',
        },
        zaxis: {
          backgroundcolor: '#E5ECF6',
          gridcolor: 'white',
          gridwidth: 2,
          linecolor: 'white',
          showbackground: true,
          ticks: '',
          zerolinecolor: 'white',
        },
      },
      shapedefaults: { line: { color: '#2a3f5f' } },
      ternary: {
        aaxis: { gridcolor: 'white', linecolor: 'white', ticks: '' },
        baxis: { gridcolor: 'white', linecolor: 'white', ticks: '' },
        bgcolor: '#E5ECF6',
        caxis: { gridcolor: 'white', linecolor: 'white', ticks: '' },
      },
      title: { x: 0.05 },
      xaxis: {
        automargin: true,
        gridcolor: 'white',
        linecolor: 'white',
        ticks: '',
        title: { standoff: 15 },
        zerolinecolor: 'white',
        zerolinewidth: 2,
      },
      yaxis: {
        automargin: true,
        gridcolor: 'white',
        linecolor: 'white',
        ticks: '',
        title: { standoff: 15 },
        zerolinecolor: 'white',
        zerolinewidth: 2,
      },
    },
  },
  title: {
    text: '<b>Big Blue Bus<br>monthly ridership</b>',
    font: {
      size: 20,
    },
    xref: 'container',
    x: 0.5,
    y: 0.9,
    yanchor: 'top',
    yref: 'container',
  },
  xaxis: {
    anchor: 'y',
    domain: [0.0, 1.0],
    tickangle: -60,
    title: { text: 'Month' },
    fixedrange: true,
  },
  yaxis: {
    anchor: 'x',
    domain: [0.0, 1.0],
    fixedrange: true,
    nticks: 20,
    tickformat: ',',
    title: {
      text: 'Number of riders',
    },
  },
};

if (!isMobile) {
  bbbLayout.title.text = '<b>Big Blue Bus monthly ridership</b>';
  bbbLayout.height = 450;
  bbbLayout.legend.x = 0;
  bbbLayout.margin.t = 100;
  bbbLayout.title.xref = 'paper';
  bbbLayout.annotations = [
    {
      showarrow: false,
      text: 'First COVID-19 case in LA',
      x: 12,
      xanchor: 'right',
      xref: 'x',
      y: 1,
      yanchor: 'top',
      yref: 'y domain',
    },
    {
      showarrow: false,
      text: 'CA stay-at-home order issued',
      x: 14,
      xanchor: 'left',
      xref: 'x',
      y: 1,
      yanchor: 'top',
      yref: 'y domain',
    },
  ];
  bbbLayout.shapes = [
    {
      line: { dash: 'dot' },
      type: 'line',
      x0: 12,
      x1: 12,
      xref: 'x',
      y0: 0,
      y1: 1,
      yref: 'y domain',
    },
    {
      line: { dash: 'dot' },
      type: 'line',
      x0: 14,
      x1: 14,
      xref: 'x',
      y0: 0,
      y1: 1,
      yref: 'y domain',
    },
  ];
  bbbLayout.legend = {
    tracegroupgap: 0,
  };
}

Plotly.newPlot('bbb-timeline', bbbData, bbbLayout, options);
